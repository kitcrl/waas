//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
////////////////////                              ////////////////////
////////////////////                              ////////////////////
////////////////////         DO NOT MODIFY        ////////////////////
////////////////////                              ////////////////////
////////////////////                              ////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
function zWebSocket(ip,port,callback)
{
  this.ip = ip;
  this.port=port;
  this.callback = callback;
  this.url = "ws://"+ip+":"+port;
  this.socket = new WebSocket(this.url);
  this.tmr;

  this.socket.onopen=function()
  {
  }
  this.socket.onmessage=function(msg)
  {
    read(msg);
  }
  this.socket.onclose=function()
  {
  }
  read = function(msg)
  {
    var rdr = new FileReader();
    rdr.readAsArrayBuffer(msg.data);
    rdr.onloadend = function()
    {
      callback(rdr.result, msg.data.size);
    }
    //callback(msg.data, msg.data.size);
  }
  this.write = function(msg)
  {
    this.socket.send(msg);
  }
};



//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////

